<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>W/C</title>
    <style>
        /* ë‹¤í¬ ëª¨ë“œ ë° ë ˆì´ì•„ì›ƒ ìŠ¤íƒ€ì¼ */
        body { 
            font-family: Arial, sans-serif; 
            padding: 20px;
            background-color: #121212; 
            color: #E0E0E0; 
        }
        h1 { color: #BB86FC; }
        
        #settings-area { margin-bottom: 10px; display: flex; gap: 10px; align-items: center; }
        
        /* ğŸ’¡ í•µì‹¬: #room-controls ì¤‘ì•™ ì •ë ¬ ë° flexbox ì„¤ì • */
        #room-controls { 
            margin-bottom: 10px; 
            display: flex; 
            gap: 10px; 
            align-items: center; /* ìˆ˜ì§ ì¤‘ì•™ ì •ë ¬ */
        } 
        
        #message-controls { margin-bottom: 10px; display: flex; gap: 10px; }
        
        /* ì±„íŒ…/ì ‘ì†ì ì»¨í…Œì´ë„ˆ */
        #chat-container {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }

        #chat-area { 
            flex-grow: 1; 
            height: 300px; 
            border: 1px solid #333; 
            background-color: #1E1E1E;
            overflow-y: scroll; 
            padding: 10px; 
        }

        /* ì ‘ì†ì ëª©ë¡ ìŠ¤íƒ€ì¼ */
        #user-list-area {
            width: 150px; 
            height: 300px;
            border: 1px solid #333;
            background-color: #1E1E1E;
            padding: 10px;
            overflow-y: auto;
        }

        #user-list-area h3 {
            margin-top: 0;
            color: #BB86FC;
            font-size: 1em;
            border-bottom: 1px solid #333;
            padding-bottom: 5px;
            margin-bottom: 5px;
        }

        #user-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        #user-list li {
            margin-bottom: 3px;
            word-break: break-all;
        }
        
        .system-msg { color: #888; font-style: italic; }
        .error-msg { color: #CF6679; font-weight: bold; }
        .user-msg { margin-bottom: 5px; }

        /* ì…ë ¥ í•„ë“œ ë””ìì¸ (ë†’ì´ ë° ë„ˆë¹„ ê³ ì •) */
        input[type="password"], input[type="text"] {
            padding: 8px;
            border: 1px solid #555;
            background-color: #333;
            color: #E0E0E0;
            border-radius: 4px;
            
            /* ë†’ì´ ê³ ì • */
            height: 38px; 
            box-sizing: border-box; 
            margin: 0; /* ì •ë ¬ ë°©í•´ ë§ˆì§„ ì œê±° */
            
            /* ë„ˆë¹„ ê³ ì • */
            max-width: 150px; 
            width: 100%; 
        }
		
		input[type="number"] {
            padding: 8px;
            border: 1px solid #555;
            background-color: #333;
            color: #E0E0E0;
            border-radius: 4px;
            
            /* ë†’ì´ ê³ ì • */
            height: 38px; 
            box-sizing: border-box; 
            margin: 0; /* ì •ë ¬ ë°©í•´ ë§ˆì§„ ì œê±° */
            
            /* ë„ˆë¹„ ê³ ì • */
            max-width: 50px; 
            width: 100%; 
        }
		
        input[type="color"] {
            border: 1px solid #555;
            border-radius: 4px;
            height: 38px; 
            box-sizing: border-box; 
        }
        
        /* ë²„íŠ¼ ë””ìì¸ */
        button {
            height: 38px; 
            padding: 8px 15px;
            border: none;
            border-radius: 4px;
            background-color: #6200EE; 
            color: white;
            cursor: pointer;
            transition: background-color 0.3s;
            box-sizing: border-box;
            margin: 0; /* ì •ë ¬ ë°©í•´ ë§ˆì§„ ì œê±° */
        }
        button:hover:not(:disabled) { background-color: #903EFF; }
        button:disabled { background-color: #444; color: #888; cursor: not-allowed; }
        
        #message-input { 
			flex-grow: 1; 
			max-width: none; /* ğŸ’¡ ì „ì—­ ì œí•œ í•´ì œ */
			width: auto; /* ğŸ’¡ flexboxì— ë§ì¶° ìë™ìœ¼ë¡œ ë„ˆë¹„ ì¡°ì • */
		}
        #room-id, #room-password { max-width: 200px; }
        
        /* ë‹‰ë„¤ì„ ê·¸ë£¹ ìŠ¤íƒ€ì¼ */
        #nickname-group { 
            display: flex; 
            gap: 5px; 
            align-items: center; 
            /* ë„ˆë¹„ ê³ ì • */
            max-width: 200px; 
            width: 100%; 
        }
        #nickname-group input { /* ë‹‰ë„¤ì„ ì…ë ¥ í•„ë“œëŠ” ê·¸ë£¹ ë‚´ì—ì„œë§Œ ìœ ì—°í•˜ê²Œ */
             max-width: none; 
        }
		
		#nickname-update-btn {
			width: 120px; /* ì›í•˜ëŠ” í­ìœ¼ë¡œ ì„¤ì • (ì˜ˆ: 120px) */
			/* paddingì„ ëª…ì‹œì ìœ¼ë¡œ ì¬ì„¤ì •í•  í•„ìš”ëŠ” ì—†ìŠµë‹ˆë‹¤. */
		}
		
		/* ğŸ’¡ ë¡œë˜ ì¶”ì²¨ê¸° ì œëª© ìŠ¤íƒ€ì¼ */
		#lotto-generator-area h2 {
			color: #03DAC6; 
			border-bottom: 1px solid #444;
			padding-bottom: 5px;
			margin-bottom: 10px;
		}
		
		/* ğŸ’¡ ë¡œë˜ ë³¼ ìŠ¤íƒ€ì¼ */
		.lotto-ball {
			padding: 5px 10px;
			margin: 0 4px;
			font-weight: bold;
			border-radius: 100%; /* ë™ê·¸ë€ ëª¨ì–‘ */
			display: inline-block;
			min-width: 25px; /* ë³¼ í¬ê¸° ê³ ì • */
			text-align: center;
		}
		
		
    </style>
</head>
<body>
    <h1>W/C</h1>
    
    <div id="settings-area">
        <label for="font-size">ê¸€ê¼´ í¬ê¸° (px):</label>
        <input type="number" id="font-size" value="16" min="10" max="30" disabled>
        
        <label for="color-picker">ê¸€ê¼´ ìƒ‰ìƒ:</label>
        <input type="color" id="color-picker" value="#B3E0FF" disabled>
        
        <button onclick="updateStyle()" id="style-update-btn" disabled>ì„¤ì • ì ìš©</button> 
    </div>

    <div id="room-controls">
        <input type="text" id="room-id" placeholder="ì±„íŒ…ë°© ID (í•„ìˆ˜)">
        <input type="password" id="room-password" placeholder="ë¹„ë°€ë²ˆí˜¸ (ìƒì„± ì‹œ ì„¤ì •/ì…ì¥ ì‹œ ì…ë ¥)">
        
        <div id="nickname-group">
            <input type="text" id="nickname" placeholder="ë‹‰ë„¤ì„ (í•„ìˆ˜)" style="width: 100%;">
            <button onclick="updateNickname()" id="nickname-update-btn" disabled>ë‹‰ë³€ê²½</button>
        </div>
        
        <button onclick="connectWebSocket()" id="join-btn">ë°© ìƒì„±/ì…ì¥</button>
    </div>

    <hr>

    <div id="chat-container">
        <div id="chat-area"></div>
        
        <div id="user-list-area">
            <h3>ì ‘ì†ì (<span id="user-count">0</span>ëª…)</h3>
            <ul id="user-list">
                </ul>
        </div>
    </div>
    
    <div id="message-controls">
        <input type="text" id="message-input" placeholder="ë©”ì‹œì§€ ì…ë ¥" disabled>
        <button onclick="sendMessage()" disabled id="send-btn">ì „ì†¡</button>
    </div>

	<div id="info-text">
		"ëª¨ë“  ì ‘ì†ìê°€ ë‚˜ê°€ë©´ ë°©ì€ ì—†ì–´ì§‘ë‹ˆë‹¤."<br>
        "ì´ W/CëŠ” ëŒ€í™”ë‚´ìš©ì„ ìˆ˜ì§‘í•˜ì§€ ì•Šìœ¼ë©°, ì±„íŒ…ë‚´ìš©ë„ ë³´í˜¸ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤."
    </div>
	

	<br>
	
    <hr>
	
    <div id="lotto-generator-area">
        <h2>ğŸ€ ì¦ê²ê²ŒíšŒì‚¬ë‹¤ë‹ˆê¸° ì¶”ì²¨ê¸°</h2>
        <div id="lotto-controls" style="display: flex; gap: 10px; margin-bottom: 10px; align-items: center; flex-wrap: wrap;">
            
            <label>ì œì™¸ ìˆ«ì 1:</label>
            <input type="number" id="lotto-exclude1" value="" placeholder="1~45" min="1" max="45" style="max-width: 50px;">
            
            <label>2:</label>
            <input type="number" id="lotto-exclude2" value="" placeholder="1~45" min="1" max="45" style="max-width: 50px;">
            
			<label> í¬í•¨ ìˆ«ì 1:</label>
            <input type="number" id="lotto-include1" value="" placeholder="1~45" min="1" max="45" style="max-width: 50px;">
            
            <label>2:</label>
            <input type="number" id="lotto-include2" value="" placeholder="1~45" min="1" max="45" style="max-width: 50px;">
			
			
            <label>ê²Œì„ ìˆ˜:</label>
            <input type="number" id="lotto-game-count" value="1" min="1" max="10" style="max-width: 50px;">
            
            <button onclick="generateLottoNumbers()" id="generate-lotto-btn">ë²ˆí˜¸ ìƒì„±</button>
        </div>
        
        <div id="lotto-result" style="font-size: 1.1em; font-weight: bold; padding: 10px; background-color: #333; border-radius: 4px; min-height: 50px;">
            ì—¬ê¸°ì— ë¡œë˜ ë²ˆí˜¸ê°€ í‘œì‹œë©ë‹ˆë‹¤.
        </div>
    </div>

  
	


    <script>
        let ws;
        let userNickname = '';
        let userStyle = {};
        
        const roomIdInput = document.getElementById('room-id');
        const passwordInput = document.getElementById('room-password');
        const nicknameInput = document.getElementById('nickname');
        const joinBtn = document.getElementById('join-btn');
        const messageInput = document.getElementById('message-input');
        const chatArea = document.getElementById('chat-area');
        const sendBtn = document.getElementById('send-btn');
        
        const fontSizeInput = document.getElementById('font-size');
        const colorPicker = document.getElementById('color-picker');
        const styleUpdateBtn = document.getElementById('style-update-btn');
        const nicknameUpdateBtn = document.getElementById('nickname-update-btn'); 
        
        const userList = document.getElementById('user-list');
        const userCount = document.getElementById('user-count');
		
		// ğŸ’¡ ì•Œë¦¼ì„ ìœ„í•œ ìƒˆ ë³€ìˆ˜
		let notificationInterval; // ê¹œë¹¡ì„ íƒ€ì´ë¨¸ ì €ì¥ ë³€ìˆ˜
		const originalTitle = document.title; // í˜ì´ì§€ì˜ ì›ë˜ ì œëª©
		let isConnected = false; // ì—°ê²° ìƒíƒœ ì¶”ì 
		
        
        // ğŸ’¡ ì£¼ì˜: ë°°í¬ ì‹œì—ëŠ” 'ws://ujuuu-chat-app.onrender.com'ìœ¼ë¡œ ë³€ê²½í•´ì•¼ í•©ë‹ˆë‹¤.
		// ğŸ’¡ ì£¼ì˜:  'ws://localhost:8080'ìœ¼ë¡œ ë³€ê²½í•´ì•¼ í•©ë‹ˆë‹¤.
        const defaultWsUrl = 'ws://ujuuu-chat-app.onrender.com'; 

        function displayMessage(message, type = 'user-msg', style = {}) {
            const msgElement = document.createElement('div');
            msgElement.classList.add(type);
            msgElement.textContent = message;
            
            if (style.fontSize) {
                msgElement.style.fontSize = style.fontSize;
            }
            if (style.color) {
                msgElement.style.color = style.color;
            }
            
            chatArea.appendChild(msgElement);
            chatArea.scrollTop = chatArea.scrollHeight;
        }
        
        function updateUserList(users) {
            userList.innerHTML = '';
            userCount.textContent = users.length;
            
            users.forEach(user => {
                const li = document.createElement('li');
                li.textContent = user.nickname;
                li.style.color = user.style ? user.style.color : '#E0E0E0'; 
                userList.appendChild(li);
            });
        }

        function toggleControls(isConnected) {
            messageInput.disabled = !isConnected;
            sendBtn.disabled = !isConnected;
            
            fontSizeInput.disabled = !isConnected; 
            colorPicker.disabled = !isConnected;
            styleUpdateBtn.disabled = !isConnected; 
            
            nicknameInput.disabled = !isConnected;
            nicknameUpdateBtn.disabled = !isConnected;

            roomIdInput.disabled = isConnected;
            passwordInput.disabled = isConnected;
            joinBtn.disabled = isConnected;
        }

        function connectWebSocket() {
            const roomId = roomIdInput.value.trim();
            const password = passwordInput.value.trim();
            const nickname = nicknameInput.value.trim();
            const fontSize = fontSizeInput.value.trim() + 'px'; 
            const color = colorPicker.value.trim();
            
            if (!roomId || !nickname) {
                alert('ì±„íŒ…ë°© IDì™€ ë‹‰ë„¤ì„ì„ ë°˜ë“œì‹œ ì…ë ¥í•´ì•¼ í•©ë‹ˆë‹¤.');
                return;
            }
            
            userNickname = nickname;
            userStyle = { fontSize, color }; 

            ws = new WebSocket(defaultWsUrl);

            ws.onopen = function(e) {
                const joinRequest = {
                    type: 'join',
                    payload: {
                        roomId: roomId,
                        password: password,
                        nickname: userNickname,
                        style: userStyle 
                    }
                };
                ws.send(JSON.stringify(joinRequest));
            };

            ws.onmessage = function(event) {
                const data = JSON.parse(event.data);
                
                if (data.type === 'join_success') {
                    displayMessage(`[ì‹œìŠ¤í…œ] ${data.message} ì±„íŒ…ì„ ì‹œì‘í•˜ì„¸ìš”.`, 'system-msg');
                    toggleControls(true);
                } else if (data.type === 'error') {
                    displayMessage(`[ì˜¤ë¥˜] ${data.message}`, 'error-msg');
                    ws.close();
                } else if (data.type === 'chat') {
                    displayMessage(data.text, 'user-msg', data.style || {});
					
					// ğŸ’¡ ì±„íŒ… ë©”ì‹œì§€ê°€ ì™”ì„ ë•Œ ì•Œë¦¼ ì‹œì‘
                    if (data.nickname !== userNickname) { // ë³¸ì¸ì´ ë³´ë‚¸ ë©”ì‹œì§€ëŠ” ì•Œë¦¼ X
                        startNotification();
                    }
					
                } 
                else if (data.type === 'user_list') {
                    updateUserList(data.users);
                }
            };

            ws.onclose = function(event) {
                displayMessage(`[ì‹œìŠ¤í…œ] ì—°ê²°ì´ í•´ì œë˜ì—ˆìŠµë‹ˆë‹¤.`, 'system-msg');
                nicknameInput.disabled = false;
                toggleControls(false);
                updateUserList([]);
            };

            ws.onerror = function(error) {
                displayMessage(`[ì‹œìŠ¤í…œ] ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ${error.message}`, 'error-msg');
                toggleControls(false);
            };
        }
        
        function updateNickname() {
            if (!ws || ws.readyState !== WebSocket.OPEN) {
                alert("ì±„íŒ…ë°©ì— ë¨¼ì € ì ‘ì†í•´ì•¼ í•©ë‹ˆë‹¤.");
                return;
            }
            
            const newNickname = nicknameInput.value.trim();
            if (!newNickname || newNickname === userNickname) {
                alert("ìƒˆë¡œìš´ ë‹‰ë„¤ì„ì„ ì…ë ¥í•˜ê±°ë‚˜ ê¸°ì¡´ê³¼ ë‹¤ë¥¸ ë‹‰ë„¤ì„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
                return;
            }
            
            const oldNickname = userNickname;
            userNickname = newNickname; 
            
            const updateRequest = {
                type: 'update_nickname',
                payload: {
                    oldNickname: oldNickname,
                    newNickname: newNickname,
                    style: userStyle 
                }
            };
            ws.send(JSON.stringify(updateRequest));
        }

        function updateStyle() {
            if (!ws || ws.readyState !== WebSocket.OPEN) {
                alert("ì±„íŒ…ë°©ì— ë¨¼ì € ì ‘ì†í•´ì•¼ í•©ë‹ˆë‹¤.");
                return;
            }

            const newFontSize = fontSizeInput.value.trim() + 'px';
            const newColor = colorPicker.value.trim();
            
            userStyle = { fontSize: newFontSize, color: newColor };
            
            const updateRequest = {
                type: 'update_style',
                payload: {
                    nickname: userNickname,
                    style: userStyle
                }
            };
            ws.send(JSON.stringify(updateRequest));
            
            displayMessage(`[ì‹œìŠ¤í…œ] ë©”ì‹œì§€ ìŠ¤íƒ€ì¼ì´ ${newFontSize} / ${newColor}ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤. (ë‹¤ìŒ ë©”ì‹œì§€ë¶€í„° ì ìš©)`, 'system-msg');
        }

        function sendMessage() {
            const messageText = messageInput.value.trim();
            
            if (ws && ws.readyState === WebSocket.OPEN && messageText) {
                const chatMessage = {
                    type: 'chat',
                    payload: {
                        nickname: userNickname,
                        text: messageText,
                        style: userStyle 
                    }
                };
                ws.send(JSON.stringify(chatMessage));
                messageInput.value = '';
            }
        }
        
        messageInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                if (document.activeElement === nicknameInput && !nicknameUpdateBtn.disabled) {
                    updateNickname();
                } 
                else if (document.activeElement === messageInput) {
                    sendMessage();
                }
            }
        });
		
		// ğŸ’¡ íƒ­ í¬ì»¤ìŠ¤ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€: ì‚¬ìš©ìê°€ íƒ­ì„ ë‹¤ì‹œ ì—´ë©´ ì•Œë¦¼ ì¤‘ì§€
		document.addEventListener('visibilitychange', () => {
			if (document.visibilityState === 'visible') {
				stopNotification();
			}
		});
		
		
		// ğŸ’¡ ì•Œë¦¼ ì‹œì‘ í•¨ìˆ˜: íƒ­ ì œëª©ì„ ë³€ê²½í•˜ì—¬ ê¹œë¹¡ì´ê²Œ ë§Œë“¦
		function startNotification() {
			if (document.hidden && !notificationInterval) { // í˜„ì¬ íƒ­ì´ ìˆ¨ê²¨ì ¸ ìˆì„ ë•Œë§Œ ì‘ë™
				let toggle = false;
				notificationInterval = setInterval(() => {
					document.title = toggle ? "ğŸ“¢ ìƒˆ ë©”ì‹œì§€ ë„ì°©!" : originalTitle;
					toggle = !toggle;
				}, 1000); // 1ì´ˆë§ˆë‹¤ ì œëª© ê¹œë¹¡ì„
			}
		}
		
		// ğŸ’¡ ì•Œë¦¼ ì¤‘ì§€ í•¨ìˆ˜: ì›ë˜ ì œëª©ìœ¼ë¡œ ë˜ëŒë¦¬ê³  íƒ€ì´ë¨¸ í•´ì œ
		function stopNotification() {
			if (notificationInterval) {
				clearInterval(notificationInterval);
				notificationInterval = null;
				document.title = originalTitle;
			}
		}
		
		
		// =================================================================
		// ğŸ’¡ ë¡œë˜ ë²ˆí˜¸ ìƒì„± í•¨ìˆ˜ (1~45, ì œì™¸ ìˆ«ì, ë‹¤ì¤‘ ê²Œì„ ì§€ì›)
		// =================================================================

		function generateLottoNumbers() {
			const MIN_NUM = 1;
			const MAX_NUM = 45;
			const PICK_COUNT = 6;

			// 1. ì…ë ¥ ê°’ ë° DOM ìš”ì†Œ ê°€ì ¸ì˜¤ê¸°
			const exclude1 = parseInt(document.getElementById('lotto-exclude1').value) || null;
			const exclude2 = parseInt(document.getElementById('lotto-exclude2').value) || null;
			const include1 = parseInt(document.getElementById('lotto-include1').value) || null;
			const include2 = parseInt(document.getElementById('lotto-include2').value) || null;
			const gameCount = parseInt(document.getElementById('lotto-game-count').value);
			const resultDiv = document.getElementById('lotto-result');
			
			let errorMsg = '';
			
			// ğŸ’¡ ìˆ˜ì •: excludes ë³€ìˆ˜ë¥¼ í•¨ìˆ˜ ì‹œì‘ ì§€ì ì— ì„ ì–¸ (ìŠ¤ì½”í”„ í™•ì¥)
			const excludes = new Set(); 
			const includes = new Set(); // ğŸ’¡ í¬í•¨ ìˆ«ì ì„¸íŠ¸

			// 2. ìœ íš¨ì„± ê²€ì‚¬ ë° includes/excludes ì •ë¦¬
        
			// ê²Œì„ ìˆ˜ ê²€ì‚¬
			if (isNaN(gameCount) || gameCount < 1 || gameCount > 10) {
				errorMsg = 'âŒ ì˜¤ë¥˜: ì¶”ì²¨ ê²Œì„ ìˆ˜ëŠ” 1ì—ì„œ 10 ì‚¬ì´ì˜ ìˆ«ìì—¬ì•¼ í•©ë‹ˆë‹¤.';
			}

			// í¬í•¨/ì œì™¸ ìˆ«ì ìœ íš¨ì„± ê²€ì‚¬ ë° Set ì¶”ê°€
			const allCustomNums = [
				{ num: exclude1, set: excludes, name: 'ì œì™¸' },
				{ num: exclude2, set: excludes, name: 'ì œì™¸' },
				{ num: include1, set: includes, name: 'í¬í•¨' },
				{ num: include2, set: includes, name: 'í¬í•¨' }
			];

			allCustomNums.forEach(item => {
				if (item.num !== null) {
					if (item.num < MIN_NUM || item.num > MAX_NUM) {
						errorMsg = `âŒ ì˜¤ë¥˜: ${item.name} ìˆ«ìëŠ” 1ë¶€í„° 45 ì‚¬ì´ì—¬ì•¼ í•©ë‹ˆë‹¤. (ì…ë ¥ ê°’: ${item.num})`;
					} else {
						item.set.add(item.num);
					}
				}
			});
			
			// í¬í•¨/ì œì™¸ ìˆ«ì ì¤‘ë³µ ê²€ì‚¬
			includes.forEach(incNum => {
				if (excludes.has(incNum)) {
					errorMsg = `âŒ ì˜¤ë¥˜: í¬í•¨ ìˆ«ìì™€ ì œì™¸ ìˆ«ìê°€ ì¤‘ë³µë  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. (ì¤‘ë³µ: ${incNum})`;
				}
			});

			// í¬í•¨ ìˆ«ìê°€ 6ê°œ ì´ˆê³¼ì¸ì§€ ê²€ì‚¬ (í˜„ì¬ëŠ” ìµœëŒ€ 2ê°œì´ë¯€ë¡œ, ì¤‘ë³µ ì…ë ¥ë§Œ ì²´í¬)
			if (includes.size > PICK_COUNT) {
				 errorMsg = `âŒ ì˜¤ë¥˜: í¬í•¨ ìˆ«ìëŠ” ì¶”ì²¨ ê°œìˆ˜(${PICK_COUNT}ê°œ)ë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`;
			}
			
			// ë‚¨ì•„ìˆëŠ” ë²ˆí˜¸ë¡œ ì¶”ì²¨ì´ ê°€ëŠ¥í•œì§€ ê²€ì‚¬
			const requiredRandomPicks = PICK_COUNT - includes.size;
			const totalAvailableNumbers = MAX_NUM - MIN_NUM + 1;
			const unavailableCount = excludes.size + includes.size; // ì œì™¸ + ì´ë¯¸ í¬í•¨ëœ ìˆ«ì
			
			if ((totalAvailableNumbers - unavailableCount) < requiredRandomPicks) {
				errorMsg = `âŒ ì˜¤ë¥˜: ì œì™¸/í¬í•¨ ìˆ«ìê°€ ë„ˆë¬´ ë§ì•„ ë¬´ì‘ìœ„ë¡œ ${requiredRandomPicks}ê°œë¥¼ ì±„ìš¸ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`;
			}
			
			if (errorMsg) {
				resultDiv.innerHTML = `<span style="color: #CF6679;">${errorMsg}</span>`;
				return;
			}


			// 3. ë¡œë˜ ë²ˆí˜¸ ìƒì„± (ê²Œì„ ìˆ˜ë§Œí¼ ë°˜ë³µ)
			let htmlResult = '';
			
			for (let game = 1; game <= gameCount; game++) {
				// A. ë¬´ì‘ìœ„ ì¶”ì²¨ì— ì‚¬ìš©ë  ìˆ«ì ë°°ì—´ (í¬í•¨/ì œì™¸ ëª¨ë‘ ì œì™¸)
				const availableNumbers = [];
				for (let i = MIN_NUM; i <= MAX_NUM; i++) {
					if (!excludes.has(i) && !includes.has(i)) {
						availableNumbers.push(i);
					}
				}
				
				// B. ê²°ê³¼ ë°°ì—´ì„ í¬í•¨ ìˆ«ìë¡œ ì´ˆê¸°í™”
				const pickedNumbers = Array.from(includes); // Setì„ ë°°ì—´ë¡œ ë³€í™˜
				
				// C. í•„ìš”í•œ ë§Œí¼ ë¬´ì‘ìœ„ ìˆ«ì ì¶”ê°€
				const numToPick = PICK_COUNT - pickedNumbers.length;
				
				for (let i = 0; i < numToPick; i++) {
					// ë‚¨ì€ ìˆ«ì ì¤‘ì—ì„œ ë¬´ì‘ìœ„ë¡œ ì¸ë±ìŠ¤ ì„ íƒ
					const randomIndex = Math.floor(Math.random() * availableNumbers.length);
					
					// ì„ íƒëœ ìˆ«ìë¥¼ ê²°ê³¼ ë°°ì—´ì— ì¶”ê°€í•˜ê³ , ì›ë³¸ ë°°ì—´ì—ì„œ ì œê±°
					pickedNumbers.push(availableNumbers[randomIndex]);
					availableNumbers.splice(randomIndex, 1);
				}

				// D. ì˜¤ë¦„ì°¨ìˆœ ì •ë ¬
				pickedNumbers.sort((a, b) => a - b); 

				// E. HTML ê²°ê³¼ì— ì¶”ê°€
				const numSpans = pickedNumbers.map(num => 
					`<span class="lotto-ball" style="background-color: ${getColorByRange(num)}; color: #121212;">${num}</span>`
				).join('');
				
				htmlResult += `
					<div style="margin-bottom: 8px; display: flex; align-items: center;">
						<span style="display: inline-block; width: 80px; font-style: italic; color: #BB86FC;">${game} ê²Œì„:</span>
						<div>${numSpans}</div>
					</div>
				`;
			}
			
			// 4. ìµœì¢… ê²°ê³¼ í‘œì‹œ
			resultDiv.innerHTML = `<div style="padding-bottom: 5px;">ğŸ‰ **ì¶”ì²¨ ê²°ê³¼ (${gameCount} ê²Œì„)**</div>${htmlResult}`;

			
			// 5. ë¡œë˜ ë²ˆí˜¸ ìƒ‰ìƒ ë°˜í™˜ í•¨ìˆ˜ (í•œêµ­ ë¡œë˜ ê¸°ì¤€)
			function getColorByRange(num) {
				if (num >= 1 && num <= 10) return '#FBC400'; // ë…¸ë‘
				if (num >= 11 && num <= 20) return '#69C8F2'; // íŒŒë‘
				if (num >= 21 && num <= 30) return '#FF7272'; // ë¹¨ê°•
				if (num >= 31 && num <= 40) return '#AAAAAA'; // íšŒìƒ‰
				if (num >= 41 && num <= 45) return '#B0D840'; // ì´ˆë¡
				return '#FFFFFF';
			}
		}
		
	
	
		
    </script>
</body>
</html>